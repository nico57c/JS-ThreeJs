<!doctype html>
<html>
  <head>
    <title>Nico57c Javascript::ThreeJS::tests/anims/spiral</title>
    <meta charset="utf-8">
    <style>
    body, html {
        margin:0px;
        padding:0px;
        background:white !important;
    }
    #container {
        font-family: sans-serif;
        padding:1em;
        background:white !important;
    }
    </style>
  </head>
<body>
  
  <div id="container"></div>
  <script src="../../js/three/three.min.js" type="text/javascript"></script>
  <script src="../../js/three/controls/OrbitControls.js" type="text/javascript"></script>
  
  <script src="../../js/nInit.js" type="text/javascript"></script>
  <script src="../../js/nObserver.js" type="text/javascript"></script>

  <script src="../../js/mThree_KeybMoveManager.js" type="text/javascript"></script>
  <script src="../../js/mThree_LoadingManager.js" type="text/javascript"></script>
  
  <script src="../../js/nRender.js" type="text/javascript"></script>
  <script src="../../js/nAnimations.js" type="text/javascript"></script>
  <script src="../../js/nObjs.js" type="text/javascript"></script>
  <script src="../../js/nScene.js" type="text/javascript"></script>
  <script src="../../js/nThree.js" type="text/javascript"></script>
  
  <script src="../../js/mThree_Curves.js" type="text/javascript"></script>
  <script src="../../js/curves/spiral.js" type="text/javascript"></script>
  
  <script src="../../js/mThree_Anims.js" type="text/javascript"></script>
  <script src="../../js/anims/spiral.js" type="text/javascript"></script>
  
<script type="text/javascript">
  nInit();
  
  // Events :
  document.body.onkeydown = function(e){ nData._.nObserver.sendEvent('keydown', e); };
  
  nData._.nObserver.addListener('keydown',function(e){
      if(e.keyCode>=48 && e.keyCode<=57){
          nData._.nObserver.sendEvent('keydown-'+(e.keyCode-48));
          e.stopImmediatePropagation();
          e.stopPropagation();
          e.preventDefault();
          return false;
      }
      
      if(e.key=='a' || e.key=='b' || e.key=='c' || e.key=='d' || e.key=='e'){
          nData._.nObserver.sendEvent('keydown-' + e.key);
          e.stopImmediatePropagation();
          e.stopPropagation();
          e.preventDefault();
          return false;
      }
  });
  
  // Create the base of ThreeJs :
  var nThree = nData._.nThree;
  nThree.initRenderer().appendRendererToNode('container');
  
  nThree.createThreeScene('s').init();
  nThree._.scenes.s.createCamera('c', 'default');
  nThree._.scenes.s.setControls('controlsOrbit','c');
  
  
  var spiralAnim = mTHREE.anims.Spiral.prototype.makeDefault(null,true,true).init();
  spiralAnim.attachToScene(nThree._.scenes.s._.scene);
  spiralAnim.attachToAnim(nThree._.scenes.s.animations);
  
  nThree._.scenes.s.animations.start().playRecursiveAnimationFrame();
  nThree.render.setToRenderRefs('renderSceneT', 's', 'c').renderRecursiveAnimationFrame();
  
  //nThree._.scenes.s.animations.start().playRecursive();
  //nThree.render.setToRenderRefs('renderSceneS', 's', 'c').renderRecursive();
</script>

</body>
</html>
  