<!doctype html>
<html>
  <head>
    <title>Nico57c Javascript::ThreeJS::tests/loadingManager/default0 based on spiral test.</title>
    <meta charset="utf-8">
    <style>
    body, html {
        margin:0px;
        padding:0px;
        background:white !important;
    }
    #container {
        margin:0px;
        padding:0px;
        font-family: sans-serif;
        background:white !important;
    }
    </style>
  </head>
<body>
  
  <div id="container"></div>
  <script src="../../js/three/three.min.js" type="text/javascript"></script>
  
  <script src="../../js/nInit.js" type="text/javascript"></script>
  
  <script src="../../js/three/controls/OrbitControls.js" type="text/javascript"></script>

  <script src="../../js/nObserver.js" type="text/javascript"></script>

  <script src="../../js/mThree_KeybMoveManager.js" type="text/javascript"></script>
  <script src="../../js/mThree_LoadingManager.js" type="text/javascript"></script>
  <script src="../../js/loadingManager/default0.js" type="text/javascript"></script>

  <script src="../../js/nRender.js" type="text/javascript"></script>
  <script src="../../js/nAnimations.js" type="text/javascript"></script>
  <script src="../../js/nObjs.js" type="text/javascript"></script>
  <script src="../../js/nScene.js" type="text/javascript"></script>
  <script src="../../js/nThree.js" type="text/javascript"></script>
  
  <script src="../../js/mThree_Curves.js" type="text/javascript"></script>
  <script src="../../js/curves/spiral.js" type="text/javascript"></script>
  
  <script src="../../js/mThree_Anims.js" type="text/javascript"></script>
  <script src="../../js/anims/spiral.js" type="text/javascript"></script>
  
<script type="text/javascript">
  nInit();
  
  // Events :
  document.body.onkeydown = function(e){ nData._.nObserver.sendEvent('keydown', e); };
  
  
  nData._.nObserver.addListener('keydown',function(e){
      if(e.keyCode>=48 && e.keyCode<=57){
          nData._.nObserver.sendEvent('keydown-'+(e.keyCode-48));
          e.stopImmediatePropagation();
          e.stopPropagation();
          e.preventDefault();
          return false;
      }
      
      if(e.key=='a' || e.key=='b' || e.key=='c' || e.key=='d' || e.key=='e'){
          nData._.nObserver.sendEvent('keydown-' + e.key);
          e.stopImmediatePropagation();
          e.stopPropagation();
          e.preventDefault();
          return false;
      }
  });
  
  // Create the base of ThreeJs :
  var nThree = nData._.nThree;
  nThree.initRenderer().appendRendererToNode('container');
  
  // LoadingManager :
  var loadingManager = new mTHREE.loadingManager.default0('test',nThree);
  nThree.render.startLoadingManager(loadingManager);
  nThree.render.stopLoadingManager(10000,function(){
      nData._.nThree.render.setToRenderRefs('renderSceneS', 's', 'c').start().renderRecursiveAnimationFrame();
      nData._.nThree._.scenes.s.animations.start().playRecursiveAnimationFrame();
  });
  
  nThree.createThreeScene('s').init();
  nThree._.scenes.s.createCamera('c', 'default');
  nThree._.scenes.s.setControls('controlsOrbit','c');
  
  var date0 = new Date();
  
  var mat0 = new THREE.MeshLambertMaterial({
      map: THREE.ImageUtils.loadTexture('/tests/loadingManager/texture1.jpg')
  });

  var mat1 = new THREE.MeshLambertMaterial({
      map: THREE.ImageUtils.loadTexture('/tests/loadingManager/texture2.jpg')
  });
  
  var mat2 = new THREE.MeshLambertMaterial({
      map: THREE.ImageUtils.loadTexture('/tests/loadingManager/texture3.jpg')
  });
  
  var mat3 = new THREE.MeshLambertMaterial({
      map: THREE.ImageUtils.loadTexture('/tests/loadingManager/texture4.jpg')
  });
  
  var mat4 = new THREE.MeshLambertMaterial({
      map: THREE.ImageUtils.loadTexture('/tests/loadingManager/texture5.jpg')
  });
  
  var mat5 = new THREE.MeshLambertMaterial({
      map: THREE.ImageUtils.loadTexture('/tests/loadingManager/texture6.jpg')
  });
  
  
  var spiralAnim0 = mTHREE.anims.Spiral.prototype.makeDefault('_0',false,false).setDefaultMat(mat0).init();
  spiralAnim0.setPosition(0,0,-400);
  spiralAnim0.attachToScene(nThree._.scenes.s._.scene);
  spiralAnim0.attachToAnim(nThree._.scenes.s.animations);
  
  var spiralAnim1 = mTHREE.anims.Spiral.prototype.makeDefault('_1',false,false).setDefaultMat(mat1).init();
  spiralAnim1.setPosition(0,0,400);
  spiralAnim1.attachToScene(nThree._.scenes.s._.scene);
  spiralAnim1.attachToAnim(nThree._.scenes.s.animations);
  
  var spiralAnim2 = mTHREE.anims.Spiral.prototype.makeDefault('_2',false,false).setDefaultMat(mat2).init();
  spiralAnim2.setPosition(0,-400,0);
  spiralAnim2.attachToScene(nThree._.scenes.s._.scene);
  spiralAnim2.attachToAnim(nThree._.scenes.s.animations);

  var spiralAnim3 = mTHREE.anims.Spiral.prototype.makeDefault('_3',false,false).setDefaultMat(mat3).init();
  spiralAnim3.setPosition(0,400,0);
  spiralAnim3.attachToScene(nThree._.scenes.s._.scene);
  spiralAnim3.attachToAnim(nThree._.scenes.s.animations);
  
  var spiralAnim4 = mTHREE.anims.Spiral.prototype.makeDefault('_4',false,false).setDefaultMat(mat4).init();
  spiralAnim4.setPosition(-400,0,0);
  spiralAnim4.attachToScene(nThree._.scenes.s._.scene);
  spiralAnim4.attachToAnim(nThree._.scenes.s.animations);
  
  var spiralAnim5 = mTHREE.anims.Spiral.prototype.makeDefault('_5',false,false).setDefaultMat(mat5).init();
  spiralAnim5.setPosition(400,0,0);
  spiralAnim5.attachToScene(nThree._.scenes.s._.scene);
  spiralAnim5.attachToAnim(nThree._.scenes.s.animations);

  
  nThree._.scenes.s
  .createLightA('A0', 0,0,0, 0xDDDDDD)
  .attachLights();

</script>
</body>
</html>
  